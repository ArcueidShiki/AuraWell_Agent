您好！`uv` 是一个由 Rye 项目团队开发的、用于 Python 包管理的现代工具。它主要旨在提供一个比 `pip` 和 `pip-tools` 更快、更高效的替代方案。

`uv` 的核心功能在于它的**速度**，因为它使用 Rust 编写，并且能够并行地解析依赖项。

---

### `uv` 的主要功能和用法

`uv` 的设计理念是作为 `pip` 和 `pip-tools` 的直接替代品，所以它的许多命令都与您熟悉的命令非常相似。

#### 1\. 安装 `uv`

首先，您需要安装 `uv`。最简单的方法是使用 `pip` 或 `pipx`。

```bash
# 使用 pip 安装
pip install uv

# 或使用 pipx (推荐，隔离工具)
pipx install uv
```

#### 2\. 创建和激活虚拟环境

`uv` 可以直接创建和管理虚拟环境，类似于 `venv`。

```bash
# 创建一个名为 .venv 的虚拟环境
uv venv

# 激活虚拟环境 (macOS/Linux)
source .venv/bin/activate

# 激活虚拟环境 (Windows)
.venv\Scripts\activate
```

#### 4\. 解析和锁定依赖

`uv` 最强大的功能之一是它的依赖解析能力。它可以代替 `pip-tools` 中的 `pip-compile` 和 `pip-sync`。

- **`uv pip compile`**: 解析您的 `requirements.in` 文件，并生成一个 `requirements.txt` 文件，其中包含所有确切的依赖版本。这个过程通常比 `pip-tools` 快 10-100 倍。

  `requirements.in` 示例：

  ```
  flask
  requests
  ```

  运行命令：

  ```bash
  uv pip compile requirements.in > requirements.txt
  ```

  `requirements.txt` 文件内容示例：

  ```
  #
  # This file is autogenerated by uv.
  # Do not edit it manually.
  #
  flask==3.0.3
  requests==2.32.3
  certifi==2024.7.4
  charset-normalizer==3.3.2
  click==8.1.7
  idna==3.7
  itsdangerous==2.1.2
  Jinja2==3.1.4
  markupsafe==2.1.5
  urllib3==2.2.1
  Werkzeug==3.0.3
  ```

- **`uv pip sync`**: 这个命令会根据一个锁定文件 (`requirements.txt`) 来精确地同步您的虚拟环境。它会安装文件中列出的所有包，并卸载环境中多余的包，确保环境与锁定文件完全一致。

  ```bash
  uv add -r requirements.txt
  uv pip sync requirements.txt

  uv add package_name # 添加依赖道 pyproject.toml, 创建.venv

  uv sync

  uv run main.py # 会把项目本身安装到虚拟环境中

  uv python list
  uv python install cpython-3.13.2-windows-x86_64-none
  uv run -p 3.12 main.py
  uv run -p 3.12 python # (interactive)

  uv run -p pypy python

  uv init -p 3.12 # 初始化一系列配置文件 pyproject.toml, .python-version

  uv tree # 查看依赖树

  uv add ruff --dev # 添加开发依赖,避免打包的时候添加
  ruff check # 检查代码规范
  uv remove ruff --dev # 移除开发依赖
  uv tool install ruff # global 脱离工程独立运行
  which ruff
  uv tool list
  uv build # 编辑好Project.scripts in .toml 打包成.whl文件
  uv tool install *.whl # 安装本地打包的.whl文件


  # 传统方式
  pip install -e . # 安装当前目录下的包
  pip install -e .[dev] # 安装当前目录下的包及其
  # pyproject.toml 写 [mypy] [pytest] testpaths = tests
  pytest.ini
  mypy.ini # 类型检查其
  ```

### 为什么选择 `uv`？

- **无与伦比的速度**: 无论是在解析依赖还是安装包方面，`uv` 都比传统的 Python 工具快得多。
- **可靠的依赖解析**: 它使用了安全的依赖解析算法，能够避免版本冲突。
- **功能整合**: `uv` 将 `pip`、`pip-tools` 和 `venv` 的功能整合到一个单一的、高性能的工具中，简化了工作流程。

如果您正在寻找一个更高效、更现代的 Python 包管理工具，那么 `uv` 是一个非常值得尝试的选择。
Ï